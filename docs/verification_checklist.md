# Verification Checklist (Day 5)

動作確認手順の詳細です。テストを実施する前に、ターミナルで `VOICEVOX` が起動していることを確認してください。

## 1. YouTube Live接続テスト (またはMockテスト)
- [1] **設定**: `.env` で `CHAT_ADAPTER=MOCK` に設定されていることを確認してください（YouTube接続テストを行う場合は `YOUTUBE` に変更し、APIキー等を設定）。
- [1] **実行**: ターミナルで `npm run dev` を実行します。
- [1] **確認**: ログに `[System] Adapter ready: FileReplayAdapter` (YouTubeの場合は `YouTubeLiveAdapter`) と表示されればOKです。

## 2. コメント返信テスト
- [ ] **準備**: `mocks/replay.json` (または `mocks/sample.json`) を開き、以下のようなデータを追記・保存します。
    ```json
    [
      { "id": "test-1", "authorName": "Tester", "content": "こんにちは", "timestamp": 1234567890 }
    ]
    ```
    ※ mockの場合、保存するとファイル変更検知またはポーリングで読み込まれます。
- [ ] **確認**:
    1. コンソールに `[SPEAK] 返答: こんにちは ですね` (の類) が表示されること。
    2. 同時に、**音声が再生されること**。

## 3. リアクションテスト
- [ ] **準備**: `mocks/replay.json` に以下を追記します。
    ```json
    [
      { "id": "test-2", "authorName": "Tester", "content": "草", "timestamp": 1234567900 }
    ]
    ```
- [ ] **確認**:
    1. コンソールに `[SPEAK] （リアクションありがとうございます！）` が表示されること。
    2. 音声が再生されること。

## 4. 独り言（Monologue）テスト
- [ ] **実行**: アプリを起動したまま、コメントを何も送らずに10秒〜20秒ほど放置します。
- [ ] **確認**:
    1. コンソールに `[SPEAK] [本線] ...` という形式の独り言が表示されること。
    2. 音声が再生されること。
    3. その後も、放置している限り定期的に独り言を話し続けること。

## 5. 耐障害性テスト (VOICEVOX停止)
- [ ] **実行**:
    1. アプリ実行中に、VOICEVOXエディタを終了させます。
    2. 適当なコメント（例: "テスト"）を `mocks/replay.json` に追記します。
- [ ] **確認**:
    1. コンソールに `[Agent] TTS synthesize failed` 等のエラーログが出ることを確認。
    2. **アプリがクラッシュせずに稼働し続けていること**を確認。
- [ ] **VOICEVOX停止**: VOICEVOX Engineを停止した状態でコメントを送る -> エラーログが出るが落ちないことを確認。

## 6. [Day 6] 自然な会話と拾い漏れ回収テスト
- [ ] **準備**: `mocks/replay.json` に「挨拶」などの非質問コメントを追加します。
- [ ] **実行**: `npm run dev`
- [ ] **確認(タイミング)**: 音声再生の前に、機械的でない「間」（0.5〜2秒程度のランダムなWait）が入ることを確認。
- [ ] **確認(回収)**:
    1. 挨拶コメント「こんにちは」などが、即座には反応されず（OFF_TOPIC扱い）、
    2. エージェントが暇になったタイミング（独り言の前など）で、「そういえばさっきのコメントだけど…」といった感じで拾って返答すれば成功です。
